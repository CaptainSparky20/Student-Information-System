{% extends 'adminportal/base_adminportal.html' %}
{% load static %}

{% block title %}Add New Student{% endblock %}

{% block adminportal_content %}
<div class="max-w-3xl mx-auto bg-white/10 backdrop-blur-md rounded-2xl p-10 border border-white/20 shadow-xl mt-12">
  <h1 class="text-3xl font-extrabold text-white mb-8 text-center select-none">Add New Student</h1>

  <form method="post" enctype="multipart/form-data" class="space-y-8">
    {% csrf_token %}

    <!-- Required Student Info -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Student Information <span class="text-red-400">*</span></legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="first_name" class="block text-gray-200 mb-2 font-semibold">First Name <span class="text-red-400">*</span></label>
          <input type="text" id="first_name" name="first_name" required 
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Enter first name">
        </div>
        <div>
          <label for="last_name" class="block text-gray-200 mb-2 font-semibold">Last Name <span class="text-red-400">*</span></label>
          <input type="text" id="last_name" name="last_name" required 
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Enter last name">
        </div>
        <div>
          <label for="email" class="block text-gray-200 mb-2 font-semibold">Email <span class="text-red-400">*</span></label>
          <input type="email" id="email" name="email" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="student@example.com">
        </div>
        <div>
          <label for="password" class="block text-gray-200 mb-2 font-semibold">Password <span class="text-red-400">*</span></label>
          <input type="password" id="password" name="password" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Set a password">
        </div>
        <div>
          <label for="profile_picture" class="block text-gray-200 mb-2 font-semibold">Profile Picture</label>
          <input type="file" id="profile_picture" name="profile_picture" accept="image/*"
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
          <p class="text-gray-400 text-sm mt-1">Optional. Upload a profile image.</p>
        </div>
        <div>
          <label for="registration_number" class="block text-gray-200 mb-2 font-semibold">Registration Number <span class="text-red-400">*</span></label>
          <input type="text" id="registration_number" name="registration_number" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Enter registration number">
        </div>
      </div>
    </fieldset>

    <!-- Academic Assignments -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Academic Details <span class="text-red-400">*</span></legend>
      <div class="space-y-6">
        <div>
          <label for="department" class="block text-gray-200 mb-2 font-semibold">Department <span class="text-red-400">*</span></label>
          <select id="department" name="department" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
            <option value="" disabled selected>Select Department</option>
            {% for dept in departments %}
              <option value="{{ dept.id }}">{{ dept.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="lecturer" class="block text-gray-200 mb-2 font-semibold">Assign Lecturer <span class="text-red-400">*</span></label>
          <select id="lecturer" name="lecturer" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
            <option value="" disabled selected>Select Lecturer</option>
            {% for lecturer in lecturers %}
              <option value="{{ lecturer.id }}">{{ lecturer.get_full_name }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="course" class="block text-gray-200 mb-2 font-semibold">Assign to Course <span class="text-red-400">*</span></label>
          <select id="course" name="course" required
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
            <option value="" disabled selected>Select Course</option>
            {% for course in courses %}
              <option value="{{ course.id }}">{{ course.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </fieldset>

    <!-- Optional Additional Details -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Additional Details (Optional)</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="phone_number" class="block text-gray-200 mb-2 font-semibold">Phone Number</label>
          <input type="text" id="phone_number" name="phone_number"
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Optional">
        </div>
        <div>
          <label for="date_of_birth" class="block text-gray-200 mb-2 font-semibold">Date of Birth</label>
          <input type="date" id="date_of_birth" name="date_of_birth"
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
        </div>
        <div class="md:col-span-2">
          <label for="address" class="block text-gray-200 mb-2 font-semibold">Address</label>
          <textarea id="address" name="address" rows="3"
            class="w-full px-4 py-3 rounded-lg bg-white/5 text-white border border-white/20 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
            placeholder="Optional"></textarea>
        </div>
      </div>
    </fieldset>

    <button type="submit" class="w-full py-4 mt-6 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-colors text-lg">
      Add Student
    </button>
  </form>
</div>
{% endblock %}
