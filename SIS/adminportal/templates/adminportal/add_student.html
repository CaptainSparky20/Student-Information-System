{% extends 'adminportal/base_adminportal.html' %}
{% load static %}

{% block title %}Add New Student{% endblock %}

{% block adminportal_content %}
<div class="max-w-3xl mx-auto bg-white/10 backdrop-blur-md rounded-2xl p-10 border border-white/20 shadow-xl mt-12">
  <h1 class="text-3xl font-extrabold text-white mb-8 text-center select-none">Add New Student</h1>

  <form method="post" enctype="multipart/form-data" class="space-y-8">
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="mb-4">
        {% for error in form.non_field_errors %}
          <div class="bg-red-600 text-white rounded p-2 mb-1">{{ error }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Required Student Info -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Student Information <span class="text-red-400">*</span></legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          {{ form.first_name.label_tag }}
          {{ form.first_name }}
          {% if form.first_name.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.first_name.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.last_name.label_tag }}
          {{ form.last_name }}
          {% if form.last_name.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.last_name.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.email.label_tag }}
          {{ form.email }}
          {% if form.email.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.email.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.password.label_tag }}
          {{ form.password }}
          {% if form.password.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.password.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.profile_picture.label_tag }}
          {{ form.profile_picture }}
          {% if form.profile_picture.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.profile_picture.errors.0 }}</p>
          {% endif %}
          <p class="text-gray-400 text-sm mt-1">Optional. Upload a profile image.</p>
        </div>
        <div>
          {{ form.registration_number.label_tag }}
          {{ form.registration_number }}
          {% if form.registration_number.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.registration_number.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </fieldset>

    <!-- Academic Assignments -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Academic Details <span class="text-red-400">*</span></legend>
      <div class="space-y-6">
        <div>
          {{ form.department.label_tag }}
          {{ form.department }}
          {% if form.department.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.department.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.lecturer.label_tag }}
          {{ form.lecturer }}
          {% if form.lecturer.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.lecturer.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.course.label_tag }}
          {{ form.course }}
          {% if form.course.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.course.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </fieldset>

    <!-- Optional Additional Details -->
    <fieldset class="border border-white/30 rounded-lg p-6 bg-white/5">
      <legend class="text-lg font-semibold text-white mb-4 px-2">Additional Details (Optional)</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          {{ form.phone_number.label_tag }}
          {{ form.phone_number }}
          {% if form.phone_number.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.phone_number.errors.0 }}</p>
          {% endif %}
        </div>
        <div>
          {{ form.date_of_birth.label_tag }}
          {{ form.date_of_birth }}
          {% if form.date_of_birth.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.date_of_birth.errors.0 }}</p>
          {% endif %}
        </div>
        <div class="md:col-span-2">
          {{ form.address.label_tag }}
          {{ form.address }}
          {% if form.address.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.address.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </fieldset>

    <button type="submit" class="w-full py-4 mt-6 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-colors text-lg">
      Add Student
    </button>
  </form>
</div>
{% endblock %}
